<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>AI Learning Assistant</title>
		<script src="https://cdn.tailwindcss.com"></script>
	</head>
	<body class="bg-gray-100">
		<div class="container mx-auto p-6">
			<h1 class="text-3xl font-bold mb-6">AI Learning Assistant</h1>

			<div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
				<form id="uploadForm" class="mb-4">
					<input
						type="file"
						accept=".pdf,.docx,.doc"
						class="w-full p-2 border rounded"
					/>
					<button
						type="submit"
						class="mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
					>
						Upload & Process
					</button>
				</form>

				<div id="resultsContainer" class="mt-6">
					<!-- Results will be dynamically populated -->
				</div>
			</div>
		</div>

		<script>
			document
				.getElementById("uploadForm")
				.addEventListener("submit", async (e) => {
					e.preventDefault();
					const fileInput = e.target.querySelector('input[type="file"]');
					const file = fileInput.files[0];

					const formData = new FormData();
					formData.append("file", file);

					try {
						const response = await fetch("/upload", {
							method: "POST",
							body: formData,
						});
						const data = await response.json();

						const container = document.getElementById("resultsContainer");
						container.innerHTML = `
                    <h2 class="text-xl font-semibold mb-4">Generated Notes</h2>
                    <p class="mb-4">${data.notes}</p>
                    <h2 class="text-xl font-semibold mb-4">Practice MCQs</h2>
                    ${data.mcqs
											.map(
												(mcq) => `
                        <div class="mb-4 p-4 bg-gray-100 rounded">
                            <p class="font-bold">${mcq.question}</p>
                            ${mcq.options
															.map(
																(option) => `
                                <label class="block">
                                    <input type="radio" name="mcq" value="${option}">
                                    ${option}
                                </label>
                            `
															)
															.join("")}
                        </div>
                    `
											)
											.join("")}
                `;
					} catch (error) {
						console.error("Error:", error);
					}
				});
		</script>
	</body>
</html>
